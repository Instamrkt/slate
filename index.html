<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Instamrkt API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["javascript","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='mailto:thatguy@instamrkt.com'>Unclear? Contact us.</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Below you can find a general overview of the system and the philosophy of Instamrkt and the API.</p>

          <h1 id='general-overview'>General overview</h1>
<p>General overview of the system and its APIs.</p>

<p>Instamrkt was built primarily as an API. As such, we served as the first developers against our own API while building the live football (soccer) prediction app.</p>

<p>The Instamrkt API is roughly divided into two parts:</p>

<ol>
<li>REST API</li>
<li>Websocket API</li>
</ol>

<p>The Websocket API is used for distributing all real-time game-related information. Everything else can (and should) be obtainable through the REST API.</p>
<h2 id='system-architecture'>System architecture</h2>
<p><img alt="System architecture" src="images/architecture.png" /></p>

<p>There are three primary components.</p>

<ol>
<li>API server</li>
<li>Resolver</li>
<li>Event server</li>
</ol>
<h3 id='api-server'>API server</h3>
<p>The API server is the primary connection point for all clients. It is a websocket that distributes information to clients via JSON messages. All clients that use the websocket (in contrast to the REST API) connect here. Clients receive solicited (responses to requests) and unsolicited (events and updates) messages from this stream.</p>
<h3 id='resolver'>Resolver</h3>
<p>Resolver receives events and is responsible for checking all open pools and determining if the incoming event is sufficient to definitively determine an outcome.</p>
<h3 id='event-server'>Event server</h3>
<p>Event server is the source of events that can potentially resolve pools or simply events that should be passed on to clients to inform the of current state of the game. <em>This is an optional part of the system, as events can also be registered manually through the API by admins with appropriate privilege.</em></p>
<h2 id='user-flow'>User flow</h2>
<p>The designed user flow is as follows:</p>

<ol>
<li>User logs in through the website / app with the signup credentials he provided (username + password + (optionally) a 2fa token) or with an externally-provided token (Facebook login). This is performed through the REST API. The call sets and returns cookies for user id (&ldquo;im_user&rdquo;) and a session key (&ldquo;session_key&rdquo;) necessary to connect to the Websocket API Server.</li>
<li>User gets to the game screen / page and using the obtained session key <a href="#connecting"> connects</a> to the Websocket API.</li>
<li>User is now connected to the API and can subscribe to games to receive push updates about them and place predictions.</li>
</ol>

<p>Please check our <a href="#sample-scenarios">Sample scenarios</a> section for examples of more detailed game flow.</p>

          <h1 id='authentication'>Authentication</h1>
<p><aside class="success">
Remember â€” we care about security for your own good!
</aside></p>

<p>All <strong>REST Api</strong> calls require the presence of an encrypted cookie, which is generated for user upon successful sign in / sign up and returned as a cookie.</p>

<p>All <strong>Websocket Api</strong> calls require the presence of a session key, which is returned to the user as a cookie (&ldquo;session_key&rdquo;) upon successful sign in / sign up and returned as a cookie.</p>

<p>To perform a successful signin, one of the following is necessary:</p>

<ol>
<li>User logs in through the website / app with the correct credentials he provided on signup(username + password + (optionally) a 2fa token).</li>
<li>User logs in with an externally-provided valid token (Facebook login).</li>
</ol>

<p>This is performed through the REST API and grants further access to this API and a Websocket API.</p>

          <h1 id='authorization'>Authorization</h1>
<p>Some of the calls require a different level of priviliges.</p>

<p>We distinguish the following admin level privileges:</p>

<ol>
<li>Game source admins</li>
<li>Game admins</li>
</ol>

<p><aside class="warning">
As of now, the above privilege levels are not opened to users.
</aside></p>
<h2 id='privilege-levels'>Privilege levels</h2><h3 id='game-source-admin'>Game source admin</h3>
<p>Game source admin is authorized to:</p>

<ol>
<li><a href="#open-a-game-source">Open a game source</a></li>
<li><a href="#close-a-game-source">Close a game source</a></li>
<li><a href="#create-and-open-a-game">Open a game for game source</a></li>
<li><a href="#become-an-admin-for-a-game">Become an admin</a> for every game opened for game source</li>
</ol>
<h3 id='game-admin'>Game admin</h3>
<ol>
<li><a href="#update-game-details">Update game details</a></li>
<li><a href="#close-a-game">Close a game</a></li>
<li><a href="#create-and-open-betting-pool">Open betting pools</a></li>
<li><a href="#block-betting-in-a-pool">Block betting pools</a></li>
<li><a href="#allow-betting-in-a-pool">Unblock betting pools</a></li>
<li><a href="#block-betting-for-action">Block betting for an action</a></li>
<li><a href="#allow-betting-for-action">Unblock betting for an action</a></li>
<li><a href="#resolve-pool--register-game-event">Register events</a></li>
</ol>

          <h1 id='rest-calls'>REST Calls</h1>
<p><aside class="notice">
Every rest call (except for signup and login) requires a server generated xsrf token. This (encrypted) token is generated by the server and saved on the client as soon as the user hits the first site / screen.
</aside></p>

<p><aside class="notice">
All request that require personal information require a userId parameter which is checked against a secure cookie.
</aside></p>

<p>Passing parameters happens as follows:</p>

<ol>
<li>GET Request - add a parameter to the query string.</li>
<li>POST Request - add a field to the post request.</li>
</ol>

<p>Response outcomes and sent response codes:</p>

<table><thead>
<tr>
<th>Response</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>SUCCESS</td>
<td>200</td>
</tr>
<tr>
<td>UNAUTHORIZED</td>
<td>401</td>
</tr>
<tr>
<td>AUTH_REQUIRED</td>
<td>403</td>
</tr>
<tr>
<td>ERROR</td>
<td>500</td>
</tr>
</tbody></table>
<h2 id='login'>Login</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/r/login'</span><span class="p">,</span> <span class="p">{</span>
  <span class="s1">'username'</span><span class="p">:</span> <span class="nx">username</span><span class="p">,</span>
  <span class="s1">'email'</span><span class="p">:</span> <span class="nx">email</span><span class="p">,</span>
  <span class="s1">'password'</span><span class="p">:</span> <span class="nx">password</span>
<span class="p">});</span>
</code></pre>

<p>This is used to sign a user in.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/login/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">POST</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Login of the user attempting to sign in.</td>
</tr>
<tr>
<td>password</td>
<td>Password of the user attempting to sign in.</td>
</tr>
<tr>
<td>next</td>
<td>The page where user is supposed to be redirected after login. Will be appended to the generated redirect url. Optional.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>null</td>
<td>Username of the signed in user (= passed loginname). Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>id</td>
<td>null</td>
<td>Id of the signed in user. Necessary for Websocket API connection. Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>redirect_url</td>
<td>/i/play</td>
<td>Redirect url for a signedin user (presumably for an endpoint requiring authentication). Can be used only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='oauthlogin'>Oauthlogin</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/r/login/oauth/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="s1">'oauthId'</span><span class="p">:</span> <span class="nx">oauth_id</span><span class="p">,</span>
  <span class="s1">'oauthToken'</span><span class="p">:</span> <span class="nx">oauthToken</span><span class="p">,</span>
  <span class="s1">'oauthEmail'</span><span class="p">:</span> <span class="nx">oauthEmail</span><span class="p">,</span>
  <span class="s1">'oauthProvider'</span><span class="p">:</span> <span class="nx">oauthProvider</span>
<span class="p">});</span>
</code></pre>

<p>This is used to sign a user in.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/login/oauth/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">POST</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oauthId</td>
<td>Oauth id.</td>
</tr>
<tr>
<td>oauthToken</td>
<td>Oauth token.</td>
</tr>
<tr>
<td>oauthEmail</td>
<td>Oauth email (which the user will be registered with).</td>
</tr>
<tr>
<td>oauthProvider</td>
<td>Oauth provider (facebook, google etc.).</td>
</tr>
<tr>
<td>next</td>
<td>The page where user is supposed to be redirected after login. Will be appended to the generated redirect url. Optional.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>null</td>
<td>Username of the signed in user. Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>id</td>
<td>null</td>
<td>Id of the signed in user. Necessary for Websocket API connection. Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>redirect_url</td>
<td>/i/play</td>
<td>Redirect url for a signedin user (presumably for an endpoint requiring authentication). Can be used only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='signup'>Signup</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/r/signup'</span><span class="p">,</span> <span class="p">{</span>
  <span class="s1">'username'</span><span class="p">:</span> <span class="nx">username</span><span class="p">,</span>
  <span class="s1">'email'</span><span class="p">:</span> <span class="nx">email</span><span class="p">,</span>
  <span class="s1">'password'</span><span class="p">:</span> <span class="nx">password</span>
<span class="p">});</span>
</code></pre>

<p>This is used to sign a user in.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/signup/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">POST</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Selected username to be validated an assigned in case of successful signup.</td>
</tr>
<tr>
<td>password</td>
<td>Selected password of the user attempting to sign up.</td>
</tr>
<tr>
<td>email</td>
<td>The email used to sign up (validated against our database, must be unique). All external communication will be directed to this email.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>null</td>
<td>Username of the signed up user. Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>user_id</td>
<td>null</td>
<td>Id of the signed up user. Necessary for Websocket API connection. Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>redirect_url</td>
<td>/i/play</td>
<td>Redirect url for a signedin user (presumably for an endpoint requiring authentication). Can be used only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='get-username'>Get Username</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">);</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/username'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">},</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">});</span>
</code></pre>

<p>This is used to retrieve a username of a signed in user.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/username/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>userId for which username is to be retrieved.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>null</td>
<td>New username of the requesting user (= passed usernameNew). Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='set-username'>Set Username</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">);</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/r/username'</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">'_xsrf'</span><span class="p">:</span> <span class="nx">_xsrf</span><span class="p">,</span>
  <span class="s1">'usernameNew'</span><span class="p">:</span> <span class="nx">username</span><span class="p">,</span>
  <span class="s1">'password'</span><span class="p">:</span> <span class="nx">password</span><span class="p">,</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">});</span>
</code></pre>

<p>This is used to update a username of a signed in user. Password needs to be passed for confirmation.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/username/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">POST</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usernameNew</td>
<td>New Username sign in.</td>
</tr>
<tr>
<td>password</td>
<td>Password of the user attempting to change the login (his id derived from the secure im_user cookie attached).</td>
</tr>
<tr>
<td>userId</td>
<td>User&rsquo;s id for which password is to be updated.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>null</td>
<td>New username of the requesting user (= passed usernameNew). Sent only on <strong>successful</strong> request.</td>
</tr>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='password-recovery'>Password recovery</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">);</span>

 <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/password/recover/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">},</span>
  <span class="s1">'username'</span><span class="p">:</span> <span class="nx">usernameOrEmail</span>
<span class="p">})</span>
<span class="p">}));</span>
</code></pre>

<p>This is used to request password recovery. It results in sending out an email with a url in which you can provide a new password (with a recovery code hidden in it).</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/password/recover/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GER</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Username or email of the user for whom password recovery is requested.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='password-update-from-recovery'>Password update (from recovery)</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">);</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/r/password/update/from_recovery'</span><span class="p">,</span> <span class="p">{</span>
  <span class="s1">'_xsrf'</span><span class="p">:</span> <span class="nx">_xsrf</span><span class="p">,</span>
  <span class="s1">'password1'</span><span class="p">:</span> <span class="nx">password1</span><span class="p">,</span>
  <span class="s1">'password2'</span><span class="p">:</span> <span class="nx">password2</span><span class="p">,</span>
  <span class="s1">'recoveryCode'</span><span class="p">:</span> <span class="nx">recoveryCode</span><span class="p">,</span>
  <span class="s1">'email'</span><span class="p">:</span> <span class="nx">email</span>
<span class="p">}));</span>
</code></pre>

<p>This is used to update password from recovery. Requires the generated and emailed recovery code and an email it was emailed to, since the cookie might not be set in this case (e.g. you are on the new machine and forgot a password).</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/password/update/from_recovery/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">POST</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>password1</td>
<td>New password.</td>
</tr>
<tr>
<td>password2</td>
<td>New password confirmation.</td>
</tr>
<tr>
<td>recoveryCode</td>
<td>The recovery code generated and included in the emailed url.</td>
</tr>
<tr>
<td>email</td>
<td>The email to which the code generated code was sent (the email is also included in the emailed url).</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='password-update-general'>Password update (general)</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">);</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/r/password/update/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="s1">'_xsrf'</span><span class="p">:</span> <span class="nx">_xsrf</span><span class="p">,</span>
  <span class="s1">'passwordOld'</span><span class="p">:</span> <span class="nx">passwordOld</span><span class="p">,</span>
  <span class="s1">'passwordNew1'</span><span class="p">:</span> <span class="nx">passwordNew1</span><span class="p">,</span>
  <span class="s1">'passwordNew2'</span><span class="p">:</span> <span class="nx">passwordNew2</span><span class="p">,</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">}));</span>
</code></pre>

<p>This is used to update password from a form on the site / app screen.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/password/update/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">POST</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>passwordNew1</td>
<td>New password.</td>
</tr>
<tr>
<td>passwordNew2</td>
<td>New password confirmation.</td>
</tr>
<tr>
<td>passwordOld</td>
<td>Old password to prove action is intentional (and not performed by someone else when actual users leaves an open form).</td>
</tr>
<tr>
<td>userId</td>
<td>Id of the user whose the password is to be updated.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>msg</td>
<td>null</td>
<td>Error message. Sent only on <strong>unsuccessful</strong> request.</td>
</tr>
</tbody></table>
<h2 id='games-history'>Games history</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">)</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/games/history/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">},</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">})</span>
</code></pre>

<p>This is used to request a user&rsquo;s game history (all the games he has predicted in).</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/games/history/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>Id of the user whose game history is to be retrieved.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_history</td>
<td>[]</td>
<td>A list of objects representing games. Each object contains the following fields: id, name, type, open_at, close_at.</td>
</tr>
</tbody></table>
<h2 id='games-upcoming'>Games upcoming</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">)</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/games/upcoming/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<p>This is used to request upcoming games.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/games/upcoming/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>upcoming_games</td>
<td>[]</td>
<td>A list of objects representing games. Each object contains the following fields: id, source_id (for the source hosting the game), currency, live_start_at, game_type_id.</td>
</tr>
</tbody></table>
<h2 id='statistics'>Statistics</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">)</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/statistics/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">},</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">})</span>
</code></pre>

<p>This is used to request user&rsquo;s personal statistics.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/statistics/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>Id of the user whose statistics are to be retrieved.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>statistics</td>
<td>{}</td>
<td>A dictionary containing selected user&rsquo;s personal statistics. <strong>key</strong> - statistic name, <strong>value</strong> - statistic value. Sent statistics: total_bets_won, total_bets_lost, average_number_of_bets_per_game, average_points_won_per_game, average_reaction_time.</td>
</tr>
</tbody></table>
<h2 id='friends'>Friends</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">)</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/friends/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">},</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">})</span>
</code></pre>

<p>This is used to request user&rsquo;s personal statistics.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/friends/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>Id of the user whose friends are to be retrieved.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>friends</td>
<td>{}</td>
<td>A dictionary containing selected user&rsquo;s personal statistics. <strong>key</strong> - friend&rsquo;s user id, <strong>value</strong> - friend&rsquo;s name.</td>
</tr>
</tbody></table>
<h2 id='leaderboard-global'>Leaderboard (global)</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">)</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/leaderboard/global/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<p>This is used to request a global leaderboard.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/leaderboard/global/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>leaderboard</td>
<td>[]</td>
<td>A list of objects. Every object has the form: <strong>key</strong> - points, <strong>value</strong> - user&rsquo;s name.</td>
</tr>
</tbody></table>
<h2 id='leaderboard-personal'>Leaderboard (personal)</h2>
<blockquote>
<p>Sample request object:</p>
</blockquote>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">$</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jquery'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cookie-getter'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">_xsrf</span>   <span class="o">=</span> <span class="nx">cookies</span><span class="p">(</span><span class="s1">'_xsrf'</span><span class="p">)</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/r/leaderboard/personal/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'X-XSRFToken'</span><span class="p">:</span> <span class="nx">_xsrf</span>
  <span class="p">},</span>
  <span class="s1">'userId'</span><span class="p">:</span> <span class="nx">userId</span>
<span class="p">})</span>
</code></pre>

<p>This is used to request a personal leaderboard.</p>
<h3 id='url'>URL</h3>
<p><code class="prettyprint">/r/leaderboard/personal/</code></p>
<h3 id='request-type'>Request type</h3>
<p><code class="prettyprint">GET</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>User id for which personal leaderboard is requested.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>leaderboard</td>
<td>[]</td>
<td>A list of objects. Every object has the form: <strong>key</strong> - points, <strong>value</strong> - user&rsquo;s name.</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-general'>Websocket API: General</h1>
<p><aside class="notice">
All websocket calls are expecting a json with the parameters listed for each call.
</aside></p>

<p><aside class="notice">
Each request needs to contain a valid header. Each response contains a response header. Both are described <a href="#headers">below</a>.
</aside></p>
<h2 id='connecting'>Connecting</h2><h3 id='connection-url'>Connection URL</h3>
<p>The connection url:
<strong>wss://instamrkt.com:9999
?id=:YOUR_USER_ID
&amp;n=:YOUR_GENERATED_NONCE
&amp;h=:YOUR_HEXDIGEST</strong></p>
<h3 id='obtaining-id-and-the-session-key'>Obtaining id and the session key</h3>
<p>Both are set and returned as cookies by a sign in or sign up requests to the REST API.</p>
<h3 id='nonce-and-hexdigest'>Nonce and hexdigest</h3><pre><code class="highlight python"><span class="kn">import</span> <span class="nn">hashlib</span>

<span class="n">sha</span>       <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">()</span>

<span class="n">sha</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
<span class="n">sha</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">nonce</span><span class="p">)</span>
<span class="n">sha</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="n">hexdigest</span> <span class="o">=</span> <span class="n">sha</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre>

<p>Nonce is the user provided random value, e.g. current timestamp in epoch millis.</p>

<p>Digest is the concatenation of strings fed to the SHA256 algorithm in the following sequence:</p>

<ol>
<li>User id</li>
<li>Nonce</li>
<li>Session key</li>
</ol>

<p>A python example of how to generate one can be found on the right.</p>
<h2 id='headers'>Headers</h2><h3 id='header'>Header</h3><pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"session_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"//not used currently"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"t"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422006034742</span><span class="p">,</span><span class="w">
  </span><span class="s2">"api_version"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each client request needs to contain a header depicted on the right.</p>
<h3 id='response-header'>Response header</h3><pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"t"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422007246302</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each response contains a header depicted on the right.</p>
<h2 id='ping'>Ping</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>You can use this to make sure the websocket connection is still open and ready for sending / receiving messages.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>ping</td>
<td>1</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>pong</td>
<td>1</td>
<td>You connection is valid.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h2 id='opcodes'>Opcodes</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"opcodes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"logon"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"opcodes"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"..."</span><span class="p">:</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"response_codes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"logon_success"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response_codes"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"..."</span><span class="p">:</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>You can use this to dynamically load the list of supported operations with operation codes.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>get_opcodes</td>
<td>2</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>opcodes</td>
<td>2</td>
<td>You received a valid list of opcodes and response codes.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>opcodes</td>
<td>{}</td>
<td>A dictionary containing all supported opcodes: <strong>key</strong> - opcode name, <strong>value</strong> - opcode.</td>
</tr>
<tr>
<td>response_codes</td>
<td>{}</td>
<td>A dictionary containing all supported response codes: <strong>key</strong> - response code name, <strong>value</strong> - response code.</td>
</tr>
</tbody></table>
<h2 id='logon'>Logon</h2>
<p>Some functionality requires you to send a logon request apart from connecting. Documenation for this calls explicitly says it is presumed you are logged in.</p>

<p>This is performed automatically for you if you are reconnecting (returning to the site after less than 15 minutes). Otherwise, this cll needs to be made explicitly.</p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="s2">"session_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This authenticates you with the api server and allows to send all requests.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>logon</td>
<td>100</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>logon_success</td>
<td>100</td>
<td>You are logged in.</td>
</tr>
<tr>
<td>logon_fail</td>
<td>110</td>
<td>You have <strong>NOT</strong> been logged in.</td>
</tr>
<tr>
<td>logon_fail_already_logged_in</td>
<td>112</td>
<td>You are logged in.</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-game-sources'>Websocket API: Game sources</h1>
<p><aside class="notice">
This section assumes you are connected as an instamrkt developer. If you do not have a developer&rsquo;s account, please <a href="https://developers.instamrkt.com">register here</a>.
</aside></p>
<h2 id='open-a-game-source'>Open a game source</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">365</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">":YOUR_SOURCE_NAME"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">335</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">":YOUR_SOURCE_ID"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This called is used to register yourself as a game provider.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>open_game_source</td>
<td>365</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_name</td>
<td>null</td>
<td>The name you want to assign to your source (your domain suggested).</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_source_opened</td>
<td>335</td>
<td>Your source has been registered. You can now open and host games.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>null</td>
<td>The new server-assigned source id with which you, as a game provider, will be identified. Necessary for making all game source-related calls.</td>
</tr>
</tbody></table>
<h2 id='close-a-game-source'>Close a game source</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">366</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">":YOUR_SOURCE_ID"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">336</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">":YOUR_SOURCE_ID"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This called is used to close a game source you are hosting. This means you will not be able to host games anymore.</p>

<p><aside class="warning">
This will automatically close all the games (and resolve pools accordingly) hosted by the source. Make sure you really want to send this request.
</aside></p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>close_game_source</td>
<td>366</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>null</td>
<td>The source id assigned by the server upon source opening.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_source_closed</td>
<td>336</td>
<td>Your source has been closed. No more games can be hosted for this source.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>null</td>
<td>Your source id.</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-games'>Websocket API: Games</h1>
<p><aside class="notice">
This section assumes you have an active game source opened. If not, read on how to open it <a href="#open-a-game-source">here</a>.
</aside></p>
<h2 id='create-and-open-a-game'>Create and open a game</h2>
<p><aside class="notice">
Only users listed as admins for the source are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">370</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Goal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Offside"</span><span class="p">,</span><span class="w"> </span><span class="s2">".."</span><span class="p">],</span><span class="w">
  </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Argentina"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Argentina:1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Argentina:2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Brazil:7"</span><span class="p">,</span><span class="w"> </span><span class="s2">".."</span><span class="p">],</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417105170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_finish_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417106170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hashtag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ArgBra"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">340</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offside"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Offside"</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417105170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_finish_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417106170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hashtag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ArgBra"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
      </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bra"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
          </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil:7"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
      </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
      </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
          </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina:1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
          </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina:2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This registers the game in the system and opens it automatically. Betting pools can now be opened for this game.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>create_and_open_game</td>
<td>370</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>null</td>
<td>Your source id.</td>
</tr>
<tr>
<td>game_name</td>
<td>null</td>
<td>The name you want to assign to your game, e.g. &ldquo;Argentina - Brazil&rdquo;.</td>
</tr>
<tr>
<td>type</td>
<td>null</td>
<td>The game type of your game, e.g. &ldquo;football&rdquo;, &ldquo;basketball&rdquo;, etc.</td>
</tr>
<tr>
<td>actions</td>
<td>[]</td>
<td>List of actions that can happen in the game, e.g. &ldquo;yellow-card&rdquo;, &ldquo;goal&rdquo;, &ldquo;offside&rdquo;, etc. Sent as a comma-separated string or an array.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>List of targets taking part in the game. Sent as a comma-separated string or an array. Targets can be infinitely nested. Nesting is indicated by including a &lsquo;:&rsquo; in the target. E.g. &ldquo;Argentina:1&rdquo; means &ldquo;Argentina, player 1&rdquo;. Server automatically builds a nested structure (see the example to the right). You can send targets of different nesting levels. An event registered for Argentina:1 will resolve pools for Argentina:1 and Argentina (e.g. Messi scores - pools for Messi&rsquo;s goals and Argentina goals get resovled). <strong>IMPORTANT</strong>: target &lsquo;none&rsquo; will be added to the target list if skipped. It&rsquo;s necessary for automatic pool resolution.</td>
</tr>
<tr>
<td>open_at</td>
<td>now()</td>
<td>Game opening time (&gt; now()) in epoch millis. No pool opening allowed before that time.</td>
</tr>
<tr>
<td>close_at</td>
<td>now()</td>
<td>Game closing time (&gt; open_at) in epoch millis. This will close the game at a given time. <strong>Warning</strong>: this will automatically resolve all the parimutuel pools running for the game. If not included (<strong>recommended</strong>), game close request has to be sent automatically.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>now()</td>
<td>Game real life starting time (&gt; now()) in epoch millis. This can be different than open_at (e.g. you might want to allow betting before the game starts in real life). Serves <strong>only</strong> as an informative value.</td>
</tr>
<tr>
<td>live_finish_at</td>
<td>now()</td>
<td>Game real life finishing time (&gt; now()) in epoch millis. This can be different than close_at (e.g. you might want to close betting before the game finishes in real life). Serves <strong>only</strong> as an informative value.</td>
</tr>
<tr>
<td>currency</td>
<td>null</td>
<td>The currency for the game.</td>
</tr>
<tr>
<td>hashtag</td>
<td>null</td>
<td>The social media hashtag to be associated with the game. If skipped will be generated from game name.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_created_and_opened</td>
<td>340</td>
<td>Your game has been created and opened. You can now open betting pools for the game.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>:YOUR_SOURCE_ID</td>
<td>Your source id.</td>
</tr>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The server-generated game id. Necessary for making all game-related calls.</td>
</tr>
<tr>
<td>game_name</td>
<td>:YOUR_GAME_NAME</td>
<td>The game name you provided.</td>
</tr>
<tr>
<td>type</td>
<td>:YOUR_GAME_TYPE</td>
<td>The game type you provided.</td>
</tr>
<tr>
<td>actions</td>
<td>[]</td>
<td>A list containing the actions ({&lsquo;action_id:&rsquo;, &lsquo;name&rsquo;:}) for the game.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>A nested, recursive list containing the targets you listed. (target id, symbol, display name and <em>sub</em> targets). Please look at the example on the right.</td>
</tr>
<tr>
<td>open_at</td>
<td>request receival time</td>
<td>The open game time in epoch millis.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>request receival time</td>
<td>The real life game start time in epoch millis (only informative).</td>
</tr>
<tr>
<td>live_finish_at</td>
<td>null</td>
<td>The real life game finish time in epoch millis (only informative).</td>
</tr>
<tr>
<td>close_at</td>
<td>null</td>
<td>The close game time in epoch millis (if null, game close request needs to be sent explicitly).</td>
</tr>
<tr>
<td>hashtag</td>
<td>null</td>
<td>The social media hashtag to be associated with the game. If skipped will be generated from game name.</td>
</tr>
</tbody></table>
<h2 id='create-a-game'>Create a game</h2>
<p><aside class="notice">
Only users listed as admins for the source are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">3701</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417105170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_finish_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417106170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hashtag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ArgBra"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">3401</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417105170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_finish_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417106170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hashtag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ArgBra"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This registers the game in the system as an upcoming game. An <a href="#open-a-game">open game</a> request needs to be sent afterwards to open a game for betting.</p>

<p>To allow betting, targets and actions need to be added to the game either with the <a href="#open-a-game">open game</a> request, or with an <a href="#update-game-details">update game details</a> request.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>create_game</td>
<td>3701</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>null</td>
<td>Your source id.</td>
</tr>
<tr>
<td>game_name</td>
<td>null</td>
<td>The name you want to assign to your game, e.g. &ldquo;Argentina - Brazil&rdquo;.</td>
</tr>
<tr>
<td>type</td>
<td>null</td>
<td>The game type of your game, e.g. &ldquo;football&rdquo;, &ldquo;basketball&rdquo;, etc.</td>
</tr>
<tr>
<td>open_at</td>
<td>now()</td>
<td>Game opening time (&gt; now()) in epoch millis. No pool opening allowed before that time.</td>
</tr>
<tr>
<td>close_at</td>
<td>now()</td>
<td>Game closing time (&gt; open_at) in epoch millis. This will close the game at a given time. <strong>Warning</strong>: this will automatically resolve all the parimutuel pools running for the game. If not included (<strong>recommended</strong>), game close request has to be sent automatically.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>now()</td>
<td>Game real life starting time (&gt; now()) in epoch millis. This can be different than open_at (e.g. you might want to allow betting before the game starts in real life). Serves <strong>only</strong> as an informative value.</td>
</tr>
<tr>
<td>live_finish_at</td>
<td>now()</td>
<td>Game real life finishing time (&gt; now()) in epoch millis. This can be different than close_at (e.g. you might want to close betting before the game finishes in real life). Serves <strong>only</strong> as an informative value.</td>
</tr>
<tr>
<td>currency</td>
<td>null</td>
<td>The currency for which you want to allow betting for in the game.</td>
</tr>
<tr>
<td>hashtag</td>
<td>null</td>
<td>The social media hashtag to be associated with the game. If skipped will be generated from game name.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_created</td>
<td>3401</td>
<td>Your game has been created and is listed as an upcoming game. You still need to open it for betting and add actions and targets.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>:YOUR_SOURCE_ID</td>
<td>Your source id.</td>
</tr>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The server-generated game id. Necessary for making all game-related calls.</td>
</tr>
<tr>
<td>game_name</td>
<td>:YOUR_GAME_NAME</td>
<td>The game name you provided.</td>
</tr>
<tr>
<td>type</td>
<td>:YOUR_GAME_TYPE</td>
<td>The game type you provided.</td>
</tr>
<tr>
<td>open_at</td>
<td>request receival time</td>
<td>The open game time in epoch millis.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>request receival time</td>
<td>The real life game start time in epoch millis (only informative).</td>
</tr>
<tr>
<td>live_finish_at</td>
<td>null</td>
<td>The real life game finish time in epoch millis (only informative).</td>
</tr>
<tr>
<td>close_at</td>
<td>null</td>
<td>The close game time in epoch millis (if null, game close request needs to be sent explicitly).</td>
</tr>
<tr>
<td>hashtag</td>
<td>null</td>
<td>The social media hashtag to be associated with the game. If skipped will be generated from game name.</td>
</tr>
</tbody></table>
<h2 id='open-a-game'>Open a game</h2>
<p><aside class="notice">
Only users listed as admins for the source are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">3702</span><span class="p">,</span><span class="w">
  </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Goal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Offside"</span><span class="p">,</span><span class="w"> </span><span class="s2">".."</span><span class="p">],</span><span class="w">
  </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Argentina"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Argentina:1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Argentina:2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Brazil:7"</span><span class="p">,</span><span class="w"> </span><span class="s2">".."</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">3402</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417105170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"live_finish_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417106170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This opens a previously created upcoming game (with a <a href="#create-a-game">create game</a> request) for betting.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>open_game</td>
<td>3702</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id for the game you want opened (sent in response to create_game request).</td>
</tr>
<tr>
<td>actions</td>
<td>[]</td>
<td>List of actions that can happen in the game, e.g. &ldquo;yellow-card&rdquo;, &ldquo;goal&rdquo;, &ldquo;offside&rdquo;, etc. Sent as a comma-separated string or an array.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>List of targets taking part in the game. Sent as a comma-separated string or an array. Targets can be infinitely nested. Nesting is indicated by including a &lsquo;:&rsquo; in the target. E.g. &ldquo;Argentina:1&rdquo; means &ldquo;Argentina, player 1&rdquo;. Server automatically builds a nested structure (see the example to the right). You can send targets of different nesting levels. An event registered for Argentina:1 will resolve pools for Argentina:1 and Argentina (e.g. Messi scores - pools for Messi&rsquo;s goals and Argentina goals get resovled).</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_created_and_opened</td>
<td>340</td>
<td>Your game has been opened. You can now open betting pools for the game. <strong>Warning</strong>: This is the same response as for the <a href="#create-and-open-a-game">create and open game</a> request. The state after processing both calls is semantically equivalent.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>:YOUR_SOURCE_ID</td>
<td>Your source id.</td>
</tr>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The server-generated game id. Necessary for making all game-related calls.</td>
</tr>
<tr>
<td>game_name</td>
<td>:YOUR_GAME_NAME</td>
<td>The game name you provided.</td>
</tr>
<tr>
<td>type</td>
<td>:YOUR_GAME_TYPE</td>
<td>The game type you provided.</td>
</tr>
<tr>
<td>actions</td>
<td>[]</td>
<td>A list containing the actions ({&lsquo;action_id:&rsquo;, &lsquo;name&rsquo;:}) for the game.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>A nested, recursive list containing the targets you listed. (target id, symbol, display name and <em>sub</em> targets). Please look at the example on the right.</td>
</tr>
<tr>
<td>open_at</td>
<td>request receival time</td>
<td>The open game time in epoch millis.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>request receival time</td>
<td>The real life game start time in epoch millis (only informative).</td>
</tr>
<tr>
<td>live_finish_at</td>
<td>null</td>
<td>The real life game finish time in epoch millis (only informative).</td>
</tr>
<tr>
<td>close_at</td>
<td>null</td>
<td>The close game time in epoch millis (if null, game close request needs to be sent explicitly).</td>
</tr>
</tbody></table>
<h2 id='become-an-admin-for-a-game'>Become an admin for a game</h2>
<p><aside class="notice">
Only the game source admin is allowed to send request as of now. Authorizing additional users to do that will come soon.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">616</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>or</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This game already has enough admins."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Game creation and opening requires game-source level privileges. All other game related calls require explicitly asking for game-level privileges. These can be obtained through this call.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>become_an_admin_for_game</td>
<td>616</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id for which you want to become an admin.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>become_an_admin_for_game_success</td>
<td>640</td>
<td>You have become an admin for the game. You can create pools and register events.</td>
</tr>
<tr>
<td>become_an_admin_for_game_fail</td>
<td>645</td>
<td>You have <strong>not</strong> become an admin for the game. This can happen in 2 cases: you have no privileges or the game already has enough admins.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id you provided.</td>
</tr>
<tr>
<td>reason</td>
<td>:YOUR_GAME_ID</td>
<td>The reason why you couldn&rsquo;t become an admin. Sent <strong>only</strong> with become_an_admin_for_game_fail response code.</td>
</tr>
</tbody></table>
<h2 id='get-game-details'>Get game details</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">373</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">342</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"game_in_progress_betting_active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hashtag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ArgBra"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"past_events"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"106a9151-2997-4c96-bc29-c020da54fa67"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"happened_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417180267000</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina:1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"13bc5390-d86c-45b8-8327-7b313b80103d"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"happened_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417180282000</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil:7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offside"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offside"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Offside"</span><span class="w">
      </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">],</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d24a1cb-5465-4ab3-befd-99fb39b7b796"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bra"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil:7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina:1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina:2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417104170</span><span class="p">,</span><span class="w">
    </span><span class="s2">"live_start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417105170</span><span class="p">,</span><span class="w">
    </span><span class="s2">"live_finish_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span></code></pre>

<p>Obtain full details for a game with given id.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>get_game_details</td>
<td>372</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id of the game which you want to obtain details for.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_details</td>
<td>342</td>
<td>You have received the requested game details.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id you provided.</td>
</tr>
<tr>
<td>game_name</td>
<td>:YOUR_GAME_NAME</td>
<td>The game name you provided.</td>
</tr>
<tr>
<td>status</td>
<td>null</td>
<td>Current game status. Possible values: &ldquo;betting_not_yet_active&rdquo;, &ldquo;pre_game_betting_active&rdquo;, &ldquo;game_in_progress_betting_active&rdquo;, &ldquo;game_in_progress_betting_closed&rdquo;, &ldquo;game_closed&rdquo;.</td>
</tr>
<tr>
<td>type</td>
<td>:YOUR_GAME_TYPE</td>
<td>The uuid of the game type you provided.</td>
</tr>
<tr>
<td>actions</td>
<td>[]</td>
<td>A list containing the actions ({&lsquo;action_id:&rsquo;, &lsquo;name&rsquo;:}) for the game.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>A nested, recursive list containing the targets you listed. (target id, symbol, display name and <em>sub</em> targets). Please look at the example on the right.</td>
</tr>
<tr>
<td>past_events</td>
<td>{}</td>
<td>A dictionary containing all the events that happened in the game so far. <strong>key</strong> - event id, <strong>value</strong> - event details (happened_at, target_id, action_id).</td>
</tr>
<tr>
<td>open_at</td>
<td>request receival time</td>
<td>The open game time in epoch millis.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>request receival time</td>
<td>The real life game start time in epoch millis (only informative).</td>
</tr>
<tr>
<td>live_finish_at</td>
<td>null</td>
<td>The real life game finish time in epoch millis (only informative).</td>
</tr>
<tr>
<td>close_at</td>
<td>null</td>
<td>The close game time in epoch millis (if null, game close request needs to be sent explicitly).</td>
</tr>
<tr>
<td>currency</td>
<td>null</td>
<td>The currency for which you want to allow betting for in the game.</td>
</tr>
<tr>
<td>hashtag</td>
<td>null</td>
<td>The social media hashtag to be associated with the game. If skipped will be generated from game name.</td>
</tr>
</tbody></table>
<h2 id='update-game-details'>Update game details</h2>
<p><aside class="notice">
Only users listed as admins for the source are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">373</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Goal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Offside"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Argentina"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Argentina:1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Argentina:2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Brazil:7"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">343</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Update game details - add new targets or actions.</p>

<p>This publishes the updated game details to users subscribed to the game.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>update_game_details</td>
<td>373</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id of the game of which you want to update details.</td>
</tr>
<tr>
<td>actions</td>
<td>[]</td>
<td>List of actions that you want to add to the game, e.g. &ldquo;yellow-card&rdquo;, &ldquo;goal&rdquo;, &ldquo;offside&rdquo;, etc. Sent as a comma-separated string or an array.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>List of targets that you want to add to the game. Sent as a comma-separated string or an array. Targets can be infinitely nested. Nesting is indicated by including a &lsquo;:&rsquo; in the target. E.g. &ldquo;Argentina:1&rdquo; means &ldquo;Argentina, player 1&rdquo;. Server automatically builds a nested structure (see the example to the right). You can send targets of different nesting levels. An event registered for Argentina:1 will resolve pools for Argentina:1 and Argentina (e.g. Messi scores - pools for Messi&rsquo;s goals and Argentina goals get resovled).</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_details_updated</td>
<td>343</td>
<td>You have updated the game details (confirmation).</td>
</tr>
<tr>
<td>game_details</td>
<td>342</td>
<td>New game details are published to everyone subscribed to the game (including you). Check <a href="#get-game-details"> get game details</a> section for a list of response parameter for this message.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id you provided.</td>
</tr>
</tbody></table>
<h2 id='join-game'>Join game</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">363</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">333</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Publishes the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">470</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the_foozle"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Join the game. This subscribes you to all the events / notifications regarding a given game.</p>

<p>This publishes the information you joined to all users subscribed to the game.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>join_game</td>
<td>363</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id of the game you want to join.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_joined</td>
<td>333</td>
<td>You have joined the game. You are now subscribed to all the notifications regarding it.</td>
</tr>
<tr>
<td>user_joined_game</td>
<td>470</td>
<td>New user joined game. Published to all users subscribed to game.</td>
</tr>
</tbody></table>
<h3 id='response-parameters-game_joined'>Response Parameters (game_joined)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id you provided.</td>
</tr>
</tbody></table>
<h3 id='response-parameters-user_joined_game'>Response Parameters (user_joined_game)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id which was joined by a user.</td>
</tr>
<tr>
<td>user_id</td>
<td>:USER_WHO_JOINED_ID</td>
<td>The id of the user that joined the game.</td>
</tr>
<tr>
<td>user_name</td>
<td>:USER_WHO_JOINED_NAME</td>
<td>The name of the user that joined the game.</td>
</tr>
</tbody></table>
<h2 id='leave-game'>Leave game</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">364</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">334</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Publishes the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the_foozle"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Leave the game. This unsubscribes you from all the events / notifications regarding a given game.</p>

<p>This publishes the information you left to all users subscribed to the game.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>leave_game</td>
<td>364</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id of the game you want to leave.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_left</td>
<td>334</td>
<td>You have left the game. You are now unsubscribed from all the notifications regarding it.</td>
</tr>
<tr>
<td>user_left_game</td>
<td>480</td>
<td>User left game. Published to all users subscribed to game.</td>
</tr>
</tbody></table>
<h3 id='response-parameters-game_joined'>Response Parameters (game_joined)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id you provided.</td>
</tr>
</tbody></table>
<h3 id='response-parameters-user_joined_game'>Response Parameters (user_joined_game)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id which was left by a user.</td>
</tr>
<tr>
<td>user_id</td>
<td>:USER_WHO_LEFT_ID</td>
<td>The id of the user that left the game.</td>
</tr>
<tr>
<td>user_name</td>
<td>:USER_WHO_LEFT_NAME</td>
<td>The name of the user that left the game.</td>
</tr>
</tbody></table>
<h2 id='close-a-game'>Close a game</h2>
<p><aside class="notice">
Only users listed as admins for the source are authorized for this call.
</aside></p>

<p><aside class="warning">
This will automatically close and resolve all the automatically resolvable pools opened in the game. It will block betting in all the pools that need to be resolved manually. Request has to be resent after these pools are resolved (if there are any). Make sure you really want to send this request.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">375</span><span class="p">,</span><span class="w">
  </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns and publishes the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">341</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Publishes bet_pool_resolved message for all resolved pools and betting_in_pool_blocked for all pools that need manual resolution.</p>
</blockquote>

<p>Close the game. This resolves all the automatic pools and blocks all the pools requiring manual resolution (if there are any).</p>

<p>If there exist any pools which need manual resolution, the request needs to be <strong>resent</strong> after this is performed.</p>

<p>After that, the game disappears from all the listings for running games.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>close_game</td>
<td>375</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>The game id of the game you want to close.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>game_closed</td>
<td>341</td>
<td>Game has been closed. No one can subscribe to it anymore. It doesn&rsquo;t show up in active games listings. Published to you and all other users subscribed to the game. <strong>Only</strong> sent if no manual pools remain unresolved.</td>
</tr>
<tr>
<td>bet_pool_resolved</td>
<td>362</td>
<td>Published to all game subscribers for all automatically resolveable pools. heck <a href="#betting-pool-resolved"> betting pool resolved</a> section for a list of response parameter for this message.</td>
</tr>
<tr>
<td>betting_in_pool_blocked</td>
<td>368</td>
<td>Published to all game subscribers for all manually resolveable pools. Check <a href="#betting-in-pool-blocked"> betting pool blocked</a> section for a list of response parameter for this message.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id you provided.</td>
</tr>
</tbody></table>
<h2 id='list-games-for-source'>List games for source</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">380</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">345</span><span class="p">,</span><span class="w">
    </span><span class="s2">"games"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dc164a36-4b82-47a4-a2b4-be757a018c9e"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"game_in_progress_betting_active"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Argentina - Brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d57951c0-c5a6-4260-bc97-1f1065daece3"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"open_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1417188144748"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Obtain full list of active games for a source with given id.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>list_games_for_source</td>
<td>380</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>null</td>
<td>Your source id.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>games_list_for_source</td>
<td>345</td>
<td>You have received the list of games active for your source id.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source_id</td>
<td>:YOUR_SOURCE_ID</td>
<td>Your source id.</td>
</tr>
<tr>
<td>games</td>
<td>{}</td>
<td>A dictionary containing all the active games for your source. <strong>key</strong> - game id, <strong>value</strong> - game data(status (possible values: &ldquo;betting_not_yet_active&rdquo;, &ldquo;pre_game_betting_active&rdquo;, &ldquo;game_in_progress_betting_active&rdquo;, &ldquo;game_in_progress_betting_closed&rdquo;, &ldquo;game_closed&rdquo;), name, type, open_at, close_at).</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-betting-pools'>Websocket API: Betting pools</h1>
<p><aside class="notice">
This section assumes you have an active game opened and running. If not, read on how to open it <a href="#open-a-game">here</a>.
</aside></p>
<h2 id='bet-pool-types'>Bet pool types</h2>
<p>We have two bet pool types recognized by the system:</p>

<ol>
<li>Parimutuel pools.</li>
<li>Binary pools.</li>
</ol>

<p>Parimutuel pools are pools with an arbitrary number of mutually exclusive targets, one of which is a target &lsquo;none&rsquo;. These pools are resolvable automatically. A sample parimutuel pool would look like this: &lsquo;Who will score the next goal?&rsquo; with targets: Brazil, Argentina, none.</p>

<p>Binary pools are pools with two options for selection. They are designed with yes/no questions in mind but not limited to that. They are not automatically resolvable - game cannot be closed until all these pools are resolved.
A sample binary pool would look like this: &lsquo;Will a brazilian player score today?&rsquo; with targets: yes, no. For these pools action is generated internally - the parameter can be skipped.</p>
<h2 id='create-and-open-betting-pool'>Create and open betting pool</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<p><aside class="success">
This functionality is also provided automatically by instamrkt - pools are opened and resolved automatically.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">385</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina,brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finish_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recreate_on_end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">352</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30cee1fa-fb20-41a6-a61c-0e0335abc2a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"people_involved"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"money_at_stake"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_blocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_hot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"backing_people"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to_win_if_backed"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bra"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"backing_money"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"backing_people"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to_win_if_backed"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"backing_money"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"argentina"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"backing_people"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to_win_if_backed"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arg"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argentina"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"backing_money"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421928724803</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finish_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This creates and opens a pool for predictions for people subscribed to the game in the system. Predictions can now be made in this pool. The successful call results in broadcasting the response to all users subscribed to the game.</p>

<p>How to make a prediction is described <a href="#place-bet-in-betting-pool">here</a>.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>create_and_open_betting_pool</td>
<td>385</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pool is to be opened.</td>
</tr>
<tr>
<td>description</td>
<td>null</td>
<td>The pool description - question which will be desplayed to users.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>An action on which the prediction is made. Has to be in a set of actions available for game.</td>
</tr>
<tr>
<td>targets</td>
<td>[]</td>
<td>List of targets on which predictions for actoin can happen. Has to be a subset of targets available for game. Sent as a comma-separated string or an array. Targets have to be of same level. That means &ldquo;argentina, brazil&rdquo; is correct, but &ldquo;argentina, brazil:9&rdquo; is not. <strong>IMPORTANT</strong>: target &lsquo;none&rsquo; will be added to target list for parimutuel pools.</td>
</tr>
<tr>
<td>pool_type</td>
<td>1</td>
<td>1 - parimutuel event based, 2 - parimutuel time based, 3 - binary event based, 4 - binary time based.</td>
</tr>
<tr>
<td>start_at</td>
<td>now()</td>
<td>Pool opening time (&gt; now()) in epoch millis. If left blank, will be opened as soon as registered by the server. <strong>As of now pools are opened as soon as this call is received by the server.</strong></td>
</tr>
<tr>
<td>finish_at</td>
<td>null</td>
<td>Pool closing time (&gt; open_at) in epoch millis. This will close the pool at a given time. <strong>Warning</strong>: this will automatically resolve th pool to <strong>none</strong>.</td>
</tr>
<tr>
<td>is_blocked</td>
<td>false</td>
<td>Is betting in pool now blocked.</td>
</tr>
<tr>
<td>is_hot</td>
<td>false</td>
<td>Is betting pool marked as &ldquo;HOT&rdquo;.</td>
</tr>
<tr>
<td>stop_accepting_bets_at</td>
<td>null</td>
<td>Stop accepting bets at time (&gt; now()) in epoch millis. This parameter is optional. Include if you want to close the pool after a certain time.</td>
</tr>
<tr>
<td>recreate_on_end</td>
<td>False</td>
<td>Boolean value describing if pool is to be recreated anew upon resolution.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>betting_pool_created</td>
<td>350</td>
<td>Your pool has been created and is now opened for predictions.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The provided game id.</td>
</tr>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The server-generated pool id. Necessary for making all pool-related calls.</td>
</tr>
<tr>
<td>description</td>
<td>null</td>
<td>The provided pool description - question which will be desplayed to users.</td>
</tr>
<tr>
<td>pool_type</td>
<td>1</td>
<td>Provided pool type: 1 - parimutuel event based, 2 - parimutuel time based, 3 - binary event based, 4 - binary time based.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>The provided action on which the prediction is made.</td>
</tr>
<tr>
<td>people_involved</td>
<td>0</td>
<td>Number of people who already placed predictions in pool. Will be incremented on every prediction.</td>
</tr>
<tr>
<td>money_at_stake</td>
<td>0.0</td>
<td>Amount of money already placed predictions in pool. Will be incremented on every prediction.</td>
</tr>
<tr>
<td>target_level</td>
<td>0</td>
<td>The computed target level for sent targets. E.g. - 1 for &ldquo;argentina, brazil&rdquo;, 2 for &ldquo;argentina:9, brazil:7&rdquo;</td>
</tr>
<tr>
<td>targets</td>
<td>{}</td>
<td>A nested, recursive dictionary containing the targets you listed. <strong>key</strong> - target id, <strong>value</strong> - target details (symbol, display name and <em>sub</em> targets). Please look at the example on the right.</td>
</tr>
<tr>
<td>start_at</td>
<td>request receival time</td>
<td>The open pool time in epoch millis.</td>
</tr>
<tr>
<td>live_start_at</td>
<td>request receival time</td>
<td>The real life game start time in epoch millis (only informative).</td>
</tr>
<tr>
<td>finish_at</td>
<td>null</td>
<td>The passed pool closing time. (Relevant only for pools of type 2 and 4).</td>
</tr>
<tr>
<td>is_blocked</td>
<td>false</td>
<td>Is betting in pool now blocked.</td>
</tr>
<tr>
<td>is_hot</td>
<td>false</td>
<td>Is betting pool now marked as &ldquo;HOT&rdquo;.</td>
</tr>
<tr>
<td>stop_accepting_bets_at</td>
<td>null</td>
<td>Provided stop accepting bets at time (&gt; now()) in epoch millis.</td>
</tr>
</tbody></table>
<h2 id='resolve-pool--register-game-event'>Resolve pool / register game event</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<p><aside class="success">
This functionality is also provided automatically by instamrkt - pools are opened and resolved automatically.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">395</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"happened_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421933670549</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structures:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">366</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"happened_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421933670549</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">362</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d48ecbc-cd97-41fa-94e8-ca0a8ff22629"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"winning_target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"winners"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"3"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">},</span><span class="w">
    </span><span class="s2">"losers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.0</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">},</span><span class="w">
    </span><span class="s2">"invalidated_bettors"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"is_money_return"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resolved_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421933670582</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This registers an event for a game (e.g. a goal, yellow card etc.). The event consists of an action and a target. This resolves all pools opened for action containing the target in its available to target. People who predicted the target win, all others lose.</p>

<p>Events of higher levels resolve also pools for events of lower levels. E.g., an event &ldquo;goal&rdquo; for target &ldquo;brazil:9&rdquo;, will resolve all pools opened for &ldquo;goal&rdquo; containing &ldquo;brazil:9&rdquo; <strong>and</strong> &ldquo;brazil&rdquo; in its targets.</p>

<p>Pool resolution in turn will cause sending out a bet_pool_resolved message, also described below. It also sends out a <a href="#balance-update-server-message">new balance</a> message to all users participating in a pool.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>register_game_event</td>
<td>395</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pool is to be opened.</td>
</tr>
<tr>
<td>description</td>
<td>&ldquo;&rdquo;</td>
<td>The pool description - question which will be desplayed to users.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>An action which happened in the game. Has to be contained in a set of actions available for game.</td>
</tr>
<tr>
<td>target_id</td>
<td>null</td>
<td>Target which performed the action. Has to be contained in a set of targets available for game. <strong>Furhtermore</strong>, has to be of maximum target level. E.g. if game contains targets such as &ldquo;brazil:9, argentina:9, brazil, argentina&rdquo;, only targets &ldquo;brazil:9, argentina:9&rdquo; will be accepted (a team cannot score a goal without a player scoring).</td>
</tr>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which event happened.</td>
</tr>
<tr>
<td>happened_at</td>
<td>null</td>
<td>Epoch millis when event happened. If skipped, defaulted to message receival time.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>new_game_event</td>
<td>366</td>
<td>Event was registered. Broadcast to all game subscribers too.</td>
</tr>
<tr>
<td>bet_pool_resolved</td>
<td>362</td>
<td>Pool resolved. Sent for every pool for action and target. Broadcast to all game subscribers.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3><h4 id='new-game-event'>New game event</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pool is to be opened.</td>
</tr>
<tr>
<td>description</td>
<td>&ldquo;&rdquo;</td>
<td>The pool description - question which will be desplayed to users.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>The provided action which happened in the game.</td>
</tr>
<tr>
<td>target_id</td>
<td>null</td>
<td>The provided target which performed the action.</td>
</tr>
<tr>
<td>target_display_name</td>
<td>null</td>
<td>The provided target&rsquo;s display name.</td>
</tr>
<tr>
<td>current_count</td>
<td>{}</td>
<td>A dictionary containing current count for action in the game - <strong>key</strong> - target_id, <strong>value</strong> - count of action for target.</td>
</tr>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The provided game id for which event happened.</td>
</tr>
<tr>
<td>happened_at</td>
<td>null</td>
<td>Epoch millis when event happened. If skipped, defaulted to message receival time.</td>
</tr>
</tbody></table>
<h4 id='pool-resolved'>Pool resolved</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which the pool was resolved.</td>
</tr>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The resolved pool id.</td>
</tr>
<tr>
<td>description</td>
<td>null</td>
<td>The provided pool description.</td>
</tr>
<tr>
<td>winning_target</td>
<td>null</td>
<td>The winning target for the pool (from the subset of targets available for pool).</td>
</tr>
<tr>
<td>winners</td>
<td>{}</td>
<td>The dictionary containing all winners. <strong>key</strong> - user id, <strong>value</strong> - how much each user won (in propotion of what they input into the pool).</td>
</tr>
<tr>
<td>losers</td>
<td>{}</td>
<td>The dictionary containing all losers. <strong>key</strong> - user id, <strong>value</strong> - how much each user lost (in propotion of what they input into the pool).</td>
</tr>
<tr>
<td>invalidated_bettors</td>
<td>[]</td>
<td>The list of user ids of people who placed their prediction too late (usually between the time of event happening and its registering by the server).</td>
</tr>
<tr>
<td>resolved_at</td>
<td>event receival time</td>
<td>The time of pool resolution in epoch millis.</td>
</tr>
</tbody></table>
<h2 id='pool-expired-server-message'>Pool expired (server message)</h2>
<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">363</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d48ecbc-cd97-41fa-94e8-ca0a8ff22629"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"winning_target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"winners"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"3"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">},</span><span class="w">
    </span><span class="s2">"losers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.0</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">},</span><span class="w">
    </span><span class="s2">"invalidated_bettors"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"is_money_return"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421933670582</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>When a pool is created as a time-based and it expires (e.g.: &ldquo;Will Brazil score before 65:00?&rdquo;) that means the pool will be resolved with target &lsquo;none&rsquo;. That means people who predicted this target are victorious. The message broadcast to all game subscribers.</p>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>bet_pool_expored</td>
<td>363</td>
<td>Pool expired (resolved to &lsquo;none&rsquo;). Sent for every pool for action and target. Broadcast to all game subscribers.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which the pool was resolved.</td>
</tr>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The resolved pool id.</td>
</tr>
<tr>
<td>description</td>
<td>null</td>
<td>The provided pool description.</td>
</tr>
<tr>
<td>winning_target</td>
<td>null</td>
<td>The winning target for the pool (from the subset of targets available for pool).</td>
</tr>
<tr>
<td>winners</td>
<td>{}</td>
<td>The dictionary containing all winners. <strong>key</strong> - user id, <strong>value</strong> - how much each user won (in propotion of what they input into the pool).</td>
</tr>
<tr>
<td>losers</td>
<td>{}</td>
<td>The dictionary containing all losers. <strong>key</strong> - user id, <strong>value</strong> - how much each user lost (in propotion of what they input into the pool).</td>
</tr>
<tr>
<td>invalidated_bettors</td>
<td>[]</td>
<td>The list of user ids of people who placed their prediction too late (usually between the time of event happening and its registering by the server).</td>
</tr>
<tr>
<td>resolved_at</td>
<td>event receival time</td>
<td>The time of pool resolution in epoch millis.</td>
</tr>
</tbody></table>
<h2 id='list-all-open-pools-for-game'>List all open pools for game</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">387</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">3535</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pools_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1421933670629"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"money_at_stake"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"finish_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_blocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_hot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"distributions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"people_involved"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ec3850f-f862-4baf-bada-73394a68bbdd"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1421935990222"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Card By Team"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"money_at_stake"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"finish_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_blocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_hot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"distributions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"people_involved"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span></code></pre>

<p>List all pools opened for predictions for a given game.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>list_all_betting_pools_for_game</td>
<td>387</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pools are to be listed.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>all_betting_pools_for_game</td>
<td>3535</td>
<td>Opened betting pools for game have been listed to you.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which the pools are listed.</td>
</tr>
<tr>
<td>pools_list</td>
<td>[]</td>
<td>A list of pools opened for game.</td>
</tr>
</tbody></table>
<h2 id='list-my-open-pools-for-game'>List my open pools for game</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">388</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">353</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pools_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1421933670629"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"money_at_stake"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"finish_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_blocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_hot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"distributions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"people_involved"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ec3850f-f862-4baf-bada-73394a68bbdd"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span></code></pre>

<p>List all pools opened for predictions for a given game <strong>in which you have not yet placed a prediction</strong>.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>list_my_open_betting_pools_for_game</td>
<td>388</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pools are to be listed.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>you_open_pools_list_for_game</td>
<td>353</td>
<td>Opened betting pools for game in which you have not placed a prediction have been listed to you.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which the pools are listed.</td>
</tr>
<tr>
<td>pools_list</td>
<td>[]</td>
<td>A lost of pools opened for game in which you have not placed a prediction.</td>
</tr>
</tbody></table>
<h2 id='list-my-running-pools-for-game'>List my running pools for game</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">389</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">354</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pools_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1421935990222"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"money_at_stake"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"finish_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_blocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is_hot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"distributions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"c34bcc05-58ea-4294-9310-9f8cbd121e29"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"placed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421937458</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Card By Team"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"people_involved"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_backed"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span></code></pre>

<p>List all pools opened for predictions for a given game <strong>in which you have not yet placed a prediction</strong>.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>list_my_running_pools_for_game</td>
<td>389</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pools are to be listed.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>your_running_pools_for_game</td>
<td>354</td>
<td>Opened betting pools for game in which you have placed a prediction have been listed to you.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which the pools are listed.</td>
</tr>
<tr>
<td>pools_list</td>
<td>[]</td>
<td>A list of pools opened for game in which you have placed a prediction.</td>
</tr>
</tbody></table>
<h2 id='list-my-resolved-pools-for-game'>List my resolved pools for game</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">390</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">355</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pools_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_winnings"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"resolved_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421938211000</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421935990000</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Next Goal By Team"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"winning_target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"distributions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"c34bcc05-58ea-4294-9310-9f8cbd121e29"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"placed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421937458000</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                    </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"people_involved"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pool_type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_backed"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"stop_accepting_bets_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421938211000</span><span class="p">,</span><span class="w">
            </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netherlands - Brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"money_at_stake"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b9a4a42-0c8a-46c0-95ee-c1e649e16fce"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>List all pools for a given game <strong>in which you have placed a prediction</strong> and the pool has been resolved.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>list_my_resolved_pools_for_game</td>
<td>390</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id for which the pools are to be listed.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>your_resolved_pools_for_game</td>
<td>355</td>
<td>Betting pools for game in which you had placed a prediction that had been resolved have been listed to you.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_GAME_ID</td>
<td>The game id for which the pools are listed.</td>
</tr>
<tr>
<td>pools_list</td>
<td>[]</td>
<td>A list of pools opened for game in which you have placed a prediction and that haved been resolved.</td>
</tr>
</tbody></table>
<h2 id='place-bet-in-betting-pool'>Place bet in betting pool</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">392</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structures:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">356</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bet_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c34bcc05-58ea-4294-9310-9f8cbd121e29"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"distribution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"c34bcc05-58ea-4294-9310-9f8cbd121e29"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"placed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421937458</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netherlands"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Places a prediction for the specified target for the specified amount in the specified pool.</p>

<p>If user does not have sufficient available funds, an appropriate dedicated error message is returned.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>place_bet_in_betting_pool</td>
<td>392</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>null</td>
<td>Pool id in which the prediction is to be placed.</td>
</tr>
<tr>
<td>target</td>
<td>null</td>
<td>The target which you want to back.</td>
</tr>
<tr>
<td>amount</td>
<td>0.0</td>
<td>Amount that you want to wager.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>bet_placed_in_betting_pool</td>
<td>356</td>
<td>You have successfully placed your prediction.</td>
</tr>
<tr>
<td>new_betting_pool_bets_distribution</td>
<td>360</td>
<td>You have changed the pool distribution. This is broadcast to all game subscribers.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3><h4 id='placing-confirmation'>Placing confirmation</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The pool id for which the prediction was placed.</td>
</tr>
<tr>
<td>pool_id</td>
<td>:NEW_BET_ID</td>
<td>Server-generated bet id.</td>
</tr>
<tr>
<td>target</td>
<td>null</td>
<td>The target which you have backed.</td>
</tr>
<tr>
<td>amount</td>
<td>0.0</td>
<td>The amount which you have specified.</td>
</tr>
</tbody></table>
<h4 id='new-distribution'>New distribution</h4>
<p>Described in <a href="#get-betting-pool-distribution">this section</a>.</p>
<h2 id='get-betting-pool-distribution'>Get betting pool distribution</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">393</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structures:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">356</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bet_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c34bcc05-58ea-4294-9310-9f8cbd121e29"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6cca4a84-d3e5-4d56-9f5e-acb50ecd5f1d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"distribution"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"brazil"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"c34bcc05-58ea-4294-9310-9f8cbd121e29"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"placed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421937458</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"none"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"netherlands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bets"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netherlands"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Places a prediction for the specified target for the specified amount in the specified pool.</p>

<p>If user does not have sufficient available funds, an appropriate dedicated error message is returned.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>get_betting_pool_bets_distribution</td>
<td>393</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>null</td>
<td>Pool id for which distribution is to be returned.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>new_betting_pool_bets_distribution</td>
<td>360</td>
<td>You have received the pool distribution.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The pool id for which the distribution was requested.</td>
</tr>
<tr>
<td>target_level</td>
<td>0</td>
<td>The computed target level for sent targets. E.g. - 1 for &ldquo;argentina, brazil&rdquo;, 2 for &ldquo;argentina:9, brazil:7&rdquo;</td>
</tr>
<tr>
<td>distribution</td>
<td>{}</td>
<td>A distribution of current predictions. <strong>key</strong> - target_id, <strong>value</strong> - a dictionary will predictions for a given target (containing a list of all bets, with details, current target multiplier, display name and total amount backing the target).</td>
</tr>
</tbody></table>
<h2 id='block-betting-in-a-pool'>Block betting in a pool</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">397</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"block_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">368</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blocked_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Blocks placing predictions in the specified pool until unblocked (or pool resolved).</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>block_betting_in_betting_pool</td>
<td>397</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>null</td>
<td>Pool id which is supposed to be blocked.</td>
</tr>
<tr>
<td>block_at</td>
<td>epoch_millis</td>
<td>Block pool at a later time - epoch_millis (&gt; now()).</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>betting_in_pool_blocked</td>
<td>368</td>
<td>You have blocked a given pool. This is broadcast to all game subscribers.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The pool id for pool which has been blocked.</td>
</tr>
<tr>
<td>blocked_at</td>
<td>epoch_millis</td>
<td>The timestamp indicating when the pool was blocked.</td>
</tr>
</tbody></table>
<h2 id='block-betting-for-action'>Block betting for action</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">3975</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"block_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structures:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">370</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blocked_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">368</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blocked_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Blocks placing predictions in all pools for specified action in a specified game until unblocked (or pools resolved).</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>block_betting_for_game_and_action</td>
<td>3975</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id in which pools are to be blocked.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>Action for which pools are to be blocked.</td>
</tr>
<tr>
<td>block_at</td>
<td>epoch_millis</td>
<td>Block pools at a later time - epoch_millis (&gt; now()).</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>betting_for_game_and_action_blocked</td>
<td>370</td>
<td>You have blocked given pools. This is broadcast to all game subscribers.</td>
</tr>
<tr>
<td>betting_in_pool_blocked</td>
<td>368</td>
<td>You have blocked a given pool. This is broadcast to all game subscribers for all pools in game for given action.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3><h4 id='blocking-confirmation'>Blocking confirmation</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_POOL_ID</td>
<td>The game id for game in which pools have been blocked.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>Action for which pools have been blocked.</td>
</tr>
<tr>
<td>blocked_at</td>
<td>epoch_millis</td>
<td>The timestamp indicating when the pools were blocked.</td>
</tr>
</tbody></table>
<h4 id='blocked-pool'>Blocked pool</h4>
<p>Described in <a href="#block-betting-in-a-pool">this section</a>.</p>
<h2 id='allow-betting-in-a-pool'>Allow betting in a pool</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">398</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"allow_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">369</span><span class="p">,</span><span class="w">
    </span><span class="s2">"allowed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Allow for placing predictions in the specified pool. Needs to called only after explicitly blocking the pool.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>allow_betting_in_betting_pool</td>
<td>398</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>null</td>
<td>Pool id for which placing predictions is to be allowed.</td>
</tr>
<tr>
<td>allow_at</td>
<td>epoch_millis</td>
<td>Allow betting pool at a later time - epoch_millis (&gt; now()).</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>betting_in_pool_allowed</td>
<td>369</td>
<td>You have allowed for placing predictions in a given pool. This is broadcast to all game subscribers.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The pool id for pool in which placing predictions has been allowed.</td>
</tr>
<tr>
<td>allowed_at</td>
<td>epoch_millis</td>
<td>The timestamp indicating when placing predictions in the given pool was allowed.</td>
</tr>
</tbody></table>
<h2 id='allow-betting-for-action'>Allow betting for action</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">3985</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"allow_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structures:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">371</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"allowed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">369</span><span class="p">,</span><span class="w">
    </span><span class="s2">"allowed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Allows for placing predictions in all pools for specified action in a specified game. Only necessary if action blocked previously.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>allow_betting_for_game_and_action</td>
<td>3985</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id in which predictions in pools are to be allowed.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>Action for which predictions in pools are to be allowed.</td>
</tr>
<tr>
<td>allow_at</td>
<td>epoch_millis</td>
<td>Allow for predcitions in pools at a later time - epoch_millis (&gt; now()).</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>betting_for_game_and_action_allowed</td>
<td>371</td>
<td>You have allowed for placing predictions in given pools. This is broadcast to all game subscribers.</td>
</tr>
<tr>
<td>betting_in_pool_allowed</td>
<td>369</td>
<td>You have allowed for placing predictions in a given pool. This is broadcast to all game subscribers for all pools in game for given action.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3><h4 id='allowing-confirmation'>Allowing confirmation</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>:YOUR_POOL_ID</td>
<td>The game id for game in which placing predictions in pools has been allowed.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>Action for which placing predictions in pools has been allowed.</td>
</tr>
<tr>
<td>allowed_at</td>
<td>epoch_millis</td>
<td>The timestamp indicating when the placing predictions in pools was allowed.</td>
</tr>
</tbody></table>
<h4 id='unblocked-pool'>Unblocked pool</h4>
<p>Described in <a href="#allow-betting-in-a-pool">this section</a>.</p>
<h2 id='suggest-hot-pool'>Suggest hot pool</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">396</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"likely_to_happen_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">367</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hot_since"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Marks pool as hot at <em>likely_to_happen_at</em> time. Allows clients to move pool up the list or put a special label on it.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>suggest_hot_betting_pool</td>
<td>396</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>null</td>
<td>Pool id for which placing predictions is to be allowed.</td>
</tr>
<tr>
<td>likely_to_happen_at</td>
<td>epoch_millis</td>
<td>At what time (epoch_millis) broadcas new hot pool message to clients.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>hot_betting_pool_suggested</td>
<td>367</td>
<td>You have marked pool as <em>hot</em>. All clients subscribed to game notified.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The pool id for pool which has been marked as hot.</td>
</tr>
<tr>
<td>hot_since</td>
<td>likely_to_happen_at</td>
<td>Since when the pool is marked as hot.</td>
</tr>
</tbody></table>
<h2 id='suggest-hot-pool-for-action-and-target'>Suggest hot pool for action and target</h2>
<p><aside class="notice">
Only users listed as admins for the game are authorized for this call.
</aside></p>

<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">3961</span><span class="p">,</span><span class="w">
    </span><span class="s2">"game_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"target_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brazil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"likely_to_happen_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structures:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">367</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hot_since"</span><span class="p">:</span><span class="w"> </span><span class="mi">1421942161542</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pool_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a183b2da-b561-4bc9-99b5-078e570e0117"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Marks <em>every</em> pool relevant for game and action and target as hot at <em>likely_to_happen_at</em> time. Allows clients to move pool up the list or put a special label on it.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>suggest_hot_betting_pool_for_action_and_target</td>
<td>3961</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>game_id</td>
<td>null</td>
<td>Game id in which the pools are to be marked hot.</td>
</tr>
<tr>
<td>action_id</td>
<td>null</td>
<td>Action for which the pools are to be marked hot.</td>
</tr>
<tr>
<td>target_id</td>
<td>null</td>
<td>Target for which the pools are to be marked hot.</td>
</tr>
<tr>
<td>likely_to_happen_at</td>
<td>epoch_millis</td>
<td>At what time (epoch_millis) broadcas new hot pool message(s) to clients.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>betting_for_game_and_action_allowed</td>
<td>371</td>
<td>You have allowed for placing predictions in given pools. This is broadcast to all game subscribers.</td>
</tr>
<tr>
<td>betting_in_pool_allowed</td>
<td>369</td>
<td>You have allowed for placing predictions in a given pool. This is broadcast to all game subscribers for all pools in game for given action.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool_id</td>
<td>:YOUR_POOL_ID</td>
<td>The pool id for pool which has been marked as hot.</td>
</tr>
<tr>
<td>hot_since</td>
<td>likely_to_happen_at</td>
<td>Since when the pool is marked as hot.</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-accounting'>Websocket API: Accounting</h1><h2 id='current-balance'>Current balance</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieves your <strong>current balance</strong> (current balance = available balance + exposure).</p>

<p><strong>Available balance</strong> is the amount that can be used for making predictions.</p>

<p><strong>Exposure</strong> is the amount placed in currently running, unresolved bet pools.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>get_my_current_balance</td>
<td>800</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>&ldquo;DON&rdquo;</td>
<td>The currency in which balance is to be retrieved. Defaults to DONuts, can be skipped.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>your_current_balance</td>
<td>800</td>
<td>You have retrieved your current balance.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>&ldquo;DON&rdquo;</td>
<td>The currency in which balance was requested.</td>
</tr>
<tr>
<td>current_balance</td>
<td>0.0</td>
<td>Current balance of the requestor.</td>
</tr>
</tbody></table>
<h2 id='available-balance'>Available balance</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">810</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">810</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieves your <strong>available balance</strong> (available balance = current balance - exposure).</p>

<p><strong>Available balance</strong> is the amount that can be used for making predictions.</p>

<p><strong>Exposure</strong> is the amount placed in currently running, unresolved bet pools.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>get_my_available_balance</td>
<td>810</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>&ldquo;DON&rdquo;</td>
<td>The currency in which balance is to be retrieved. Defaults to DONuts, can be skipped.</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>your_available_balance</td>
<td>810</td>
<td>You have retrieved your available balance.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>&ldquo;DON&rdquo;</td>
<td>The currency in which balance was requested.</td>
</tr>
<tr>
<td>available_balance</td>
<td>0.0</td>
<td>Available balance of the requestor.</td>
</tr>
</tbody></table>
<h2 id='exposure'>Exposure</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">840</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">840</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exposure"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieves your <strong>exposure</strong> (exposure = current balance - available balance).</p>

<p><strong>Available balance</strong> is the amount that can be used for making predictions.</p>

<p><strong>Exposure</strong> is the amount placed in currently running, unresolved bet pools.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>get_my_exposure</td>
<td>840</td>
</tr>
</tbody></table>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>your_exposure</td>
<td>840</td>
<td>You have retrieved your exposure.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>exposure</td>
<td>null</td>
<td>Amount of exposure in a given currency.</td>
</tr>
<tr>
<td>currency</td>
<td>null</td>
<td>Requested currency.</td>
</tr>
</tbody></table>
<h2 id='balance-update-server-message'>Balance update (server message)</h2>
<p><aside class="notice">
This is an <strong>unsolicited</strong> server message, pushed at the user through the websocket on every balance update.
</aside></p>

<blockquote>
<p>Sends the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">815</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">1000.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">1000.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DON"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Updates you with your changed current and available balance.</p>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>balance_update</td>
<td>815</td>
<td>You have received your current and available balance update.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>current_balance</td>
<td>0.0</td>
<td>Your up-to-date current balance.</td>
</tr>
<tr>
<td>available_balance</td>
<td>0.0</td>
<td>Your up-to-date available balance.</td>
</tr>
<tr>
<td>currency</td>
<td>&ldquo;DON&rdquo;</td>
<td>The currency in which the balances were updated.</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-chat'>Websocket API: Chat</h1><h2 id='send-chat-message'>Send chat message</h2>
<blockquote>
<p>Expects the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targets"</span><span class="p">:</span><span class="w"> </span><span class="s2">"69c623bf-046a-43b6-8de5-a0b3ae9b142e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a message."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Returns the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">901</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vinnie"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a message."</span><span class="w">
  </span><span class="s2">"received_at"</span><span class="err">:</span><span class="w"> </span><span class="mi">1421928724803</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This sends a chat message to user&rsquo;s subscribed to specified games. If target is left empty, the message is broadcast to all games user is subscribed to. Therefore, specifying a single (the one user is actively following) game is recommended.</p>
<h3 id='operation-code'>Operation code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
</tr>
</thead><tbody>
<tr>
<td>text_message</td>
<td>900</td>
</tr>
</tbody></table>
<h3 id='call-parameters'>Call Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>null</td>
<td>The text you want to send.</td>
</tr>
<tr>
<td>targets</td>
<td>null</td>
<td>An array with string of game ids, or a single string containing a game id to which the message is to be broadcast. Single target recommended.</td>
</tr>
</tbody></table>
<h3 id='response-codes'>Response codes</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>new_text_message</td>
<td>901</td>
<td>New text message. Broadcast to all users subscribed to game which id was passed as a target.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>null</td>
<td>Your message text.</td>
</tr>
<tr>
<td>sender</td>
<td>:YOUR_USERNAME</td>
<td>Sender&rsquo;s username. Recommended display: &ldquo;sender: text&rdquo;.</td>
</tr>
<tr>
<td>received_at</td>
<td>epoch_millis</td>
<td>When the message was received by the server.</td>
</tr>
</tbody></table>

          <h1 id='websocket-api-errors'>Websocket API: Errors</h1><h2 id='generic-error'>Generic error</h2>
<blockquote>
<p>Sends the following JSON structure:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response_header"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"res"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You are not authorized to open a game source."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This message is sent if:</p>

<ul>
<li>servers fails to process your message correclty,</li>
<li>some of your input data is incorrect,</li>
<li>some of the input data is missing,</li>
<li>you are not authorized to perform the operation you are intending to.</li>
</ul>
<h3 id='response-code'>Response code</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Code</th>
<th>Result</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>666</td>
<td>Your requested operation has resulted in an error.</td>
</tr>
</tbody></table>
<h3 id='response-parameters'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>null</td>
<td>Error explanation.</td>
</tr>
</tbody></table>

          <h1 id='sample-scenarios'>Sample scenarios</h1><h2 id='list-running-games'>List running games</h2>
<p>To list running games, simply use <a href="#list-games-for-source"> this call</a>. Use <a href="#instamrkt-source-uuid"> INSTAMRKT_SOURCE_ID</a> as game source.</p>
<h2 id='join-a-game-subscribe'>Join a game (subscribe)</h2>
<p>Pick a game from a <a href="#list-running-games">list of currently running games</a>, and send a <a href="#join-game">join game</a> request. Include a game uuid of a selected game in your request.</p>
<h2 id='list-open-pools'>List open pools</h2>
<p>Once you&rsquo;ve <a href="#join-a-game-subscribe">joined a game</a>, you can list pools that are opened for predictions for this game with  <a href="#list-my-open-pools-for-game">this request</a>.</p>
<h2 id='place-a-prediction'>Place a prediction</h2>
<p>Once you know in which pool the prediction is to be placed (e.g. having <a href="#list-open-pools">listed</a> them), perform this using <a href="#place-bet-in-betting-pool">this call</a>. Remember to include the pool uuid in your request.</p>
<h2 id='check-balance'>Check balance</h2>
<p>If you want to see how you&rsquo;re currently doing, you can always check your <a href="#current-balance">current</a> and <a href="#available-balance">available</a> balance, as well as check <a href="#exposure">exposure</a>.</p>

          <h1 id='terms-of-use'>Terms of use</h1>
          <h1 id='dictionary'>Dictionary</h1><h2 id='instamrkt-source-uuid'>Instamrkt source uuid</h2>
<p>It&rsquo;s <strong>1d963264-b4f4-4f52-aa42-1bf76e4df381</strong>.</p>
<h2 id='ids'>Ids</h2>
<p>All object ids are in the form of unique uuids.</p>
<h2 id='bet--prediction'>Bet / prediction</h2>
<p>We use these terms interchangeably. It basically means placing a some of the held currency in a prediction pool and backing a selected target with that amount. The money will be returned (multiplied by a multiplier resulting from a pool distribution) if the pool is resolved with that target (target performs the action).</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
