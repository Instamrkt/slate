# REST Calls

<aside class="notice">
Every rest call (except for signup) requires a server generated xsrf token. This (encrypted) token is generated by the server and saved on the client as soon as the user hits the first site / screen.
</aside>

Passing parameters happens as follows:

1. GET Request - add a parameter to the query string.
2. POST Request - add a field to the post request.

## Login

> Sample request object:

```javascript
$.post('/r/login', {
	headers: {
    'X-XSRFToken': _xsrf
  },
  'username': username,
  'email': email,
  'password': password
});
```

This is used to sign a user in.

### URL
`/r/login/`

### Request type

`POST`

### Request Parameters

Parameter | Description
--------- | -------
loginname | Login of the user attempting to sign in.
password | Password of the user attempting to sign in.
next | The page where user is supposed to be redirected after login. Will be appended to the generated redirect url. Optional.

### Response Parameters

Parameter | Default | Description
--------- | ------- | -----------
username | null | Username of the signed in user (= passed loginname). Sent only on **successful** request.
id | null | Id of the signed in user. Necessary for Websocket API connection. Sent only on **successful** request.
redirect_url | /i/play | Redirect url for a signedin user (presumably for an endpoint requiring authentication). Can be used only on **successful** request.
msg | null | Error message. Sent only on **unsuccessful** request.


## Oauthlogin
## Signup

> Sample request object:

```javascript
$.post('/r/signup', {
  'username': username,
  'email': email,
  'password': password
});
```

This is used to sign a user in.

### URL
`/r/signup/`

### Request type

`POST`

### Request Parameters

Parameter | Description
--------- | -------
username | Selected username to be validated an assigned in case of successful signup.
password | Selected password of the user attempting to sign up.
email | The email used to sign up (validated against our database, must be unique). All external communication will be directed to this email.

### Response Parameters

Parameter | Default | Description
--------- | ------- | -----------
username | null | Username of the signed up user. Sent only on **successful** request.
user_id | null | Id of the signed up user. Necessary for Websocket API connection. Sent only on **successful** request.
redirect_url | /i/play | Redirect url for a signedin user (presumably for an endpoint requiring authentication). Can be used only on **successful** request.
msg | null | Error message. Sent only on **unsuccessful** request.

## Session key
key

## Username

## Password recovery
## Password update

## Games history
## Games upcoming

## Statistics
## Friends
## Leaderboard


