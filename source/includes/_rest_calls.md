# REST Calls

<aside class="notice">
Every rest call requires a server generated xsrf token. This (encrypted) token is generated by the server and saved on the client as soon as the user hits the first site / screen.
</aside>

Passing parameters happens as follows:

1. GET Request - add a parameter to the query string.
2. POST Request - add a field to the post request.

## Login / Signup

### Login

> Sample request object:

```json
{
	"type": "POST",
	"url": "/r/login",
	"xhrFields": {
	  "withCredentials": true
	},
	"headers": {
	    "X-XSRFToken": "_xsrf"
	},
	"data": {
		"_xsrf": "_xsrf",
		"loginname": "instamrkt",
		"password": "abcdef"
	}
}
```

This is used to sign a user in.

#### URL
`/r/login/`

#### Request type

`POST`

#### Request Parameters

Parameter | Description
--------- | -------
loginname | Login of the user attempting to sign in.
password | Password of the user attempting to sign in.
next | The page where user is supposed to be redirected after login. Will be appended to the generated redirect url. Optional.

#### Response Parameters

Parameter | Default | Description
--------- | ------- | -----------
username | null | Username of the signed in user (= passed loginname). Sent only on **successful** request.
id | null | Id of the signed in user. Necessary for Websocket API connection. Sent only on **successful** request.
redirect_url | /i/play | Redirect url for a signedin user (presumably for an endpoint requiring authentication). Can be used only on **successful** request.
msg | null | Error message. Sent only on **unsuccessful** request.


### Oauthlogin
### Signup

## Session key
key

## Username

## Password
### Recovery
### Update

## Games
### Games History
### Upcoming Games

## Personal
### Statistics
### Friends
### Leaderboard


